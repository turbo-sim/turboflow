turbomachinery: axial_turbine
operation_points: 
  fluid_name: air          # Fluid
  T0_in: 295.6             # Inlet total temperature
  p0_in: 13.8e4            # Inlet total pressure
  p_out : 13.8e4/10.5     # Exit static pressure
  omega: 1627              # Rotational speed
  alpha_in: 0              # Flow angle at first stator


simulation_options: 
  deviation_model : aungier 
  choking_criterion : critical_mach_number
  # rel_step_fd: 1e-4 
  loss_model:  
    model: benner
    loss_coefficient: stagnation_pressure  
    inlet_displacement_thickness_height_ratio: 0.011  
  
performance_analysis :
  performance_map: 
    fluid_name: air 
    T0_in: 295.6
    p0_in: 13.8e4
    p_out: 13.8e4/np.linspace(1.6, 4.5, 40)
    omega: 1627 
    alpha_in: 0 
  solver_options:
    method: lm 
    tolerance: 1e-8  
    max_iterations: 100 
    derivative_method: 2-point  
    derivative_abs_step: 1e-6 
    print_convergence: True
    plot_convergence: False
  initial_guess :
      efficiency_tt : [0.9, 0.8] 
      efficiency_ke : [0.2, 0.1]
      ma_1 : [0.8, 0.8]
      ma_2 : [0.8, 0.8]

geometry:
  cascade_type: ["stator", "rotor", "stator", "rotor", "stator", "rotor", "stator", "rotor"]
  radius_hub_in: [0.084785, 0.084785, 0.084785, 0.084785, 0.084785, 0.084785, 0.084785, 0.084785]
  radius_hub_out: [0.084785, 0.081875, 0.084785, 0.081875, 0.084785, 0.081875, 0.084785, 0.081875]
  radius_tip_in: [0.118415, 0.118415, 0.118415, 0.118415, 0.118415, 0.118415, 0.118415, 0.118415]
  radius_tip_out: [0.118415, 0.121325, 0.118415, 0.121325, 0.118415, 0.121325, 0.118415, 0.121325]
  pitch: [1.8294e-2, 1.524e-2, 1.8294e-2, 1.524e-2, 1.8294e-2, 1.524e-2, 1.8294e-2, 1.524e-2]
  chord: [2.616e-2, 2.606e-2, 2.616e-2, 2.606e-2, 2.616e-2, 2.606e-2, 2.616e-2, 2.606e-2]
  stagger_angle: [+43.03, -31.05, +43.03, -31.05, +43.03, -31.05, +43.03, -31.05]
  opening: [0.747503242e-2, 0.735223377e-2, 0.747503242e-2, 0.735223377e-2, 0.747503242e-2, 0.735223377e-2, 0.747503242e-2, 0.735223377e-2]
  leading_edge_angle : [0.00, 29.60, 0.00, 29.60, 0.00, 29.60, 0.00, 29.60]
  leading_edge_wedge_angle : [50.00, 50.00, 50.00, 50.00, 50.00, 50.00, 50.00, 50.00]
  leading_edge_diameter : [2*0.127e-2, 2*0.081e-2, 2*0.127e-2, 2*0.081e-2, 2*0.127e-2, 2*0.081e-2, 2*0.127e-2, 2*0.081e-2]
  trailing_edge_thickness : [0.050e-2, 0.050e-2, 0.050e-2, 0.050e-2, 0.050e-2, 0.050e-2, 0.050e-2, 0.050e-2]
  maximum_thickness : [0.505e-2, 0.447e-2, 0.505e-2, 0.447e-2, 0.505e-2, 0.447e-2, 0.505e-2, 0.447e-2]
  tip_clearance: [0.00, 0.030e-2, 0.00, 0.030e-2, 0.00, 0.030e-2, 0.00, 0.030e-2]
  throat_location_fraction: [5/6, 5/6, 5/6, 5/6, 5/6, 5/6, 5/6, 5/6]

# design_optimization: # Dummy Config
#   objective_function:
#     variable : overall.efficiency_ts
#     scale : 1
#     type : maximize
#   variables :
#     specific_speed : # Limited
#       value : 0.713756
#       lower_bound : 0.5
#       upper_bound : 1.5
#     blade_jet_ratio : # Limited
#       value : 0.466501
#       lower_bound : 0.3
#       upper_bound : 0.8
#     hub_tip_ratio_in :
#       value : [0.715999, 0.715999, 0.715999, 0.715999, 0.715999, 0.715999, 0.715999, 0.715999]
#       lower_bound : [0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6]
#       upper_bound : [0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9]
#     hub_tip_ratio_out :
#       value : [0.715999, 0.674840, 0.715999, 0.674840, 0.715999, 0.674840, 0.715999, 0.674840]
#       lower_bound : [0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6]
#       upper_bound : [0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9]
#     aspect_ratio :
#       value : [1.285550, 1.402149, 1.285550, 1.402149, 1.285550, 1.402149, 1.285550, 1.402149]
#       lower_bound : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
#       upper_bound : [2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0]
#     pitch_chord_ratio :
#       value : [0.699312, 0.584804, 0.699312, 0.584804, 0.699312, 0.584804, 0.699312, 0.584804]
#       lower_bound : [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5]
#       upper_bound : [1.10, 1.10, 1.10, 1.10, 1.10, 1.10, 1.10, 1.10]
#     trailing_edge_thickness_opening_ratio :
#       value : [0.066889, 0.068007, 0.066889, 0.068007, 0.066889, 0.068007, 0.066889, 0.068007]
#       lower_bound : [0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05]
#       upper_bound : [0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2]
#     leading_edge_angle : # (-70-15)
#       value : [0.5, 0.66444444, 0.5, 0.66444444, 0.5, 0.66444444, 0.5, 0.66444444]
#       lower_bound : [0.11111111, 0.41666667, 0.11111111, 0.41666667, 0.11111111, 0.41666667, 0.11111111, 0.41666667]
#       upper_bound : [0.58333333, 0.88888889, 0.58333333, 0.88888889, 0.58333333, 0.88888889, 0.58333333, 0.88888889]
#     gauging_angle : # (55-75)
#       value : [0.86601513, 0.16024573, 0.86601513, 0.16024573, 0.86601513, 0.16024573, 0.86601513, 0.16024573]
#       lower_bound : [0.80555556, 0.08333333, 0.80555556, 0.08333333, 0.80555556, 0.08333333, 0.80555556, 0.08333333]
#       upper_bound : [0.91666667, 0.19444444, 0.91666667, 0.19444444, 0.91666667, 0.19444444, 0.91666667, 0.19444444]
#     v_in :
#       value : 0.22715060950254562
#       lower_bound : 0.001
#       upper_bound : 0.5
#     w_out :
#       value : [0.7560168311370046, 0.714178597145251, 0.7560168311370046, 0.714178597145251, 0.7560168311370046, 0.714178597145251, 0.7560168311370046, 0.714178597145251]
#       lower_bound : [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]
#       upper_bound : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
#     s_out :
#       value : [0.02393594702543656, 0.07236629937075202, 0.02393594702543656, 0.07236629937075202, 0.10815448607815192, 0.16315448607815192, 0.10815448607815192, 0.16315448607815192]
#       lower_bound : [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
#       upper_bound : [0.32, 0.32, 0.32, 0.32, 0.32, 0.32, 0.32, 0.32]
#     beta_out :
#       value : [0.8650417242559838, 0.16150395974996423, 0.8650417242559838, 0.16150395974996423, 0.8650417242559838, 0.16150395974996423, 0.8650417242559838, 0.16150395974996423]
#       lower_bound : [0.72, 0.06, 0.72, 0.06, 0.72, 0.06, 0.72, 0.06]
#       upper_bound : [0.94, 0.28, 0.94, 0.28, 0.94, 0.28, 0.94, 0.28]
#     w_crit_throat :
#       value : [0.954641310153918, 0.8901549785503726, 0.954641310153918, 0.8901549785503726, 0.954641310153918, 0.8901549785503726, 0.954641310153918, 0.8901549785503726]
#       lower_bound : [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]
#       upper_bound : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
#     s_crit_throat :
#       value : [0.04006361313218885, 0.09614205881131721, 0.04006361313218885, 0.09614205881131721, 0.04006361313218885, 0.09614205881131721, 0.04006361313218885, 0.09614205881131721]
#       lower_bound : [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
#       upper_bound : [0.32, 0.32, 0.32, 0.32, 0.32, 0.32, 0.32, 0.32]
#     throat_location_fraction :
#       value : [5/6, 5/6, 5/6, 5/6, 5/6, 5/6, 5/6, 5/6]
#     leading_edge_diameter :
#       value : [2*0.127e-2, 2*0.081e-2, 2*0.127e-2, 2*0.081e-2, 2*0.127e-2, 2*0.081e-2, 2*0.127e-2, 2*0.081e-2]
#     leading_edge_wedge_angle :
#       value : [50.0, 50.0, 50.0, 50.0, 50.0, 50.0, 50.0, 50.0]
#     tip_clearance :
#       value : [0.00, 0.030e-2, 0.00, 0.030e-2, 0.00, 0.030e-2, 0.00, 0.030e-2]
#     cascade_type :
#       value : ["stator", "rotor", "stator", "rotor", "stator", "rotor", "stator", "rotor"]
#   constraints : # Optional
#     - variable: overall.mass_flow_rate
#       type : "="
#       value : 2.721057
#       normalize : True
#     - variable : additional_constraints.interspace_area_ratio
#       type : "="
#       value : 1
#       normalize : True
#     - variable : geometry.flaring_angle
#       type : "<"
#       value : 10
#       normalize : True
#     - variable : geometry.flaring_angle
#       type : ">"
#       value : -10
#       normalize : True

#   radius_type : "constant_mean"

design_optimization:
  objective_function: 
    variable : overall.efficiency_ts
    scale : 1
    type : maximize
  variables :
    specific_speed : # Limited 
      value : 0.617974444
      # value : 0.713756
      lower_bound : 0.5
      upper_bound : 1.5
    blade_jet_ratio : # Limited
      value : 0.358182498
      # value : 0.466501
      lower_bound : 0.3
      upper_bound : 0.8
    hub_tip_ratio_in :
      value : [0.715999, 0.715999, 0.674840305, 0.63851147, 0.5975470, 0.5644608, 0.527073, 0.493204]
      # value : [0.715999, 0.715999, 0.715999, 0.715999, 0.715999, 0.715999, 0.715999, 0.715999]
      lower_bound : [0.6, 0.6, 0.6, 0.6, 0.4, 0.4, 0.4, 0.4]
      upper_bound : [0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.90, 0.90]
    hub_tip_ratio_out :
      value : [0.715999, 0.674840, 0.63851147, 0.597547073, 0.5644608, 0.5270732, 0.493204, 0.4606522]
      # value : [0.715999, 0.674840, 0.715999, 0.674840, 0.715999, 0.674840, 0.715999, 0.674840]
      lower_bound : [0.6, 0.6, 0.6, 0.6, 0.4, 0.4, 0.4, 0.4]
      upper_bound : [0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9]
    aspect_ratio :
      value : [1.285550, 1.402149, 1.931255729, 1.993770764, 1.95000, 1.95000, 1.95000, 1.95000 ]
      # value : [1.285550, 1.402149, 1.285550, 1.402149, 1.285550, 1.402149, 1.285550, 1.402149]
      lower_bound : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
      upper_bound : [2.0, 2.0, 2.0, 2.5, 2.5, 2.0, 2.0, 2.0]
    pitch_chord_ratio :
      value : [0.699312, 0.584804, 0.680109991, 0.602574751, 0.5687693, 0.508501, 0.500, 0.500]
      # value : [0.699312, 0.584804, 0.699312, 0.584804, 0.699312, 0.584804, 0.699312, 0.584804]
      lower_bound : [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.45, 0.45]
      upper_bound : [1.10, 1.10, 1.10, 1.10, 1.10, 1.10, 1.10, 1.10]
    trailing_edge_thickness_opening_ratio : 
      value : [0.066889, 0.068007, 0.062211136, 0.051901504, 0.062211136, 0.051901504, 0.062211136, 0.051901504]
      # value : [0.066889, 0.068007, 0.066889, 0.068007, 0.066889, 0.068007, 0.066889, 0.068007]
      lower_bound : [0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.045, 0.045]
      upper_bound : [0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2]
    leading_edge_angle : # (-70-15)
      value : [0.5, 0.66444444, 0.355, 0.57722222, 0.355, 0.57722222, 0.355, 0.57722222]
      # value : [0.5, 0.66444444, 0.5, 0.66444444, 0.5, 0.66444444, 0.5, 0.66444444]
      lower_bound : [0.11111111, 0.41666667, 0.11111111, 0.41666667, 0.11111111, 0.41666667, 0.11111111, 0.41666667]
      upper_bound : [0.58333333, 0.88888889, 0.58333333, 0.88888889, 0.58333333, 0.88888889, 0.58333333, 0.88888889]
    gauging_angle : # (55-75)
      value : [0.86601513, 0.16024573, 0.82190876, 0.22530754, 0.82190876, 0.22530754, 0.82190876, 0.22530754]
      # value : [0.86601513, 0.16024573, 0.86601513, 0.16024573, 0.86601513, 0.16024573, 0.86601513, 0.16024573]
      lower_bound : [0.80555556, 0.08333333, 0.80555556, 0.08333333, 0.80555556, 0.08333333, 0.80555556, 0.08333333]
      upper_bound : [0.91666667, 0.19444444, 0.91666667, 0.19444444, 0.91666667, 0.19444444, 0.91666667, 0.19444444]
    v_in :
      value : 0.17483841791985336
      # value : 0.22715060950254562
      lower_bound : 0.001
      upper_bound : 0.5
    w_out : 
      value : [0.5743400396686017, 0.5119751306792047, 0.5704555954898529, 0.5303570979648965, 0.5704555954898529, 0.5303570979648965, 0.5704555954898529, 0.5303570979648965]
      # value : [0.7560168311370046, 0.714178597145251, 0.7560168311370046, 0.714178597145251, 0.7560168311370046, 0.714178597145251, 0.7560168311370046, 0.714178597145251]
      lower_bound : [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]
      upper_bound : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
      # lower_bound : [0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001]
      # upper_bound : [10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0]
    s_out : 
      value : [0.012633490067597192, 0.03545427054405003, 0.05034626392277026, 0.07815448607815192, 0.10815448607815192, 0.16315448607815192, 0.208154486, 0.283154486]
      lower_bound : [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
      upper_bound : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
    beta_out : 
      value : [0.8647779704391381, 0.16365088087974772, 0.8214840458686987, 0.22605133340799188, 0.8214840458686987, 0.22605133340799188, 0.8214840458686987, 0.22605133340799188]
      lower_bound : [0.72, 0.06, 0.72, 0.06, 0.72, 0.06, 0.72, 0.06]
      upper_bound : [0.94, 0.28, 0.94, 0.28, 0.94, 0.28, 0.94, 0.28]
    w_crit_throat : 
      value : [0.7425457928153598, 0.7081385012810505, 0.5782466015668692, 0.5381573775278097, 0.5782466015668692, 0.5381573775278097, 0.5782466015668692, 0.5381573775278097]
      lower_bound : [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]
      upper_bound : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
      # lower_bound : [0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001]
      # upper_bound : [10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0]
    s_crit_throat : 
      value : [0.022636729710951507, 0.056183143084448814, 0.050691656736498766, 0.078659915434332, 0.0800, 0.115, 0.12250, 0.1725]
      lower_bound : [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
      upper_bound : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
    throat_location_fraction : 
      value : [5/6, 5/6, 5/6, 5/6, 5/6, 5/6, 5/6, 5/6]
    leading_edge_diameter :
      value : [2*0.127e-2, 2*0.081e-2, 2*0.097e-2, 2*0.081e-2, 2*0.097e-2, 2*0.081e-2, 2*0.097e-2, 2*0.081e-2]
    leading_edge_wedge_angle :
      value : [50.0, 50.0, 50.0, 50.0, 50.0, 50.0, 50.0, 50.0]
    tip_clearance :
      value : [0.00, 0.030e-2, 0.0, 0.038e-2, 0.0, 0.038e-2, 0.0, 0.038e-2]
    cascade_type : 
      value : ["stator", "rotor", "stator", "rotor", "stator", "rotor", "stator", "rotor"]
  constraints : # Optional
    - variable: overall.mass_flow_rate
      type : "="
      value : 2.425270761
      normalize : True 
    - variable : additional_constraints.interspace_area_ratio
      type : "="
      value : 1
      normalize : True
    - variable : geometry.flaring_angle 
      type : "<"
      value : 10
      normalize : True
    - variable : geometry.flaring_angle 
      type : ">"
      value : -10
      normalize : True
  radius_type : "constant_mean"
  # multistarts : 0

  solver_options:
    library: scipy
    method: slsqp
    # library: pygmo
    # method: ipopt
    derivative_method: 2-point
    derivative_abs_step: 1e-9
    print_convergence: True
    plot_convergence: False 
    update_on: "gradient"
    tolerance: 1e-6
    max_iterations: 1000
    # options :
    #   tol: 1e-6
    #   max_iter: 5



