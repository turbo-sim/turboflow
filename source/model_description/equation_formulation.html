<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Equation formulation and solution &mdash; turboflow v0.1.12 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=87e54e7c" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=abecb913" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=825059f5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script src="../../_static/design-tabs.js?v=f930bc37"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            turboflow
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_description.html">Model Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nomenclature.html">Nomenclature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/turboflow.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide.html">Developer guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">turboflow</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Equation formulation and solution</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/source/model_description/equation_formulation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="equation-formulation-and-solution">
<span id="equation-formulation"></span><h1>Equation formulation and solution<a class="headerlink" href="#equation-formulation-and-solution" title="Link to this heading">ÔÉÅ</a></h1>
<p>In this section, an overview of the model description and how the equation are assembled
and solved are presented. The model description sections presents a set of equations to evaluate
velocity triangles, fluid properties, deviation, losses and to evaluate choking. But how are
these equation used throughout the model? For this model formulation, the fluid properties and velocity triangles are evaluated at both the inlet and
exit plane of each cascade in the turbine. The throat section is either evaluated only at critical
conditions or also evlauated similarly as the exit plane, dependent on the choking model (see <a class="reference internal" href="choking_models.html#choking-models"><span class="std std-ref">Choking models</span></a> for more details).
The losses are evaluated at the exit plane for each cascade, in addition to the throat (also here at either
critical conditions or evaluated simliarly as the exit plane). Similar applies to the deviation, which is also evaluated at the exit
and may be applied to the throat, depending on the choking model.</p>
<p>To evalaute the equations, a set of inputs are required, which also vary somewhat for different choking models.
For the <cite>evaluate_critical_cascade</cite> the following set of input is required for each cascade (except for <span class="math notranslate nohighlight">\(v_{\mathrm{in}}\)</span>):</p>
<div class="math notranslate nohighlight">
\[ x = [
v_{\mathrm{in}} ,\,
w_{\mathrm{out}} ,\,
s_{\mathrm{out}} ,\,
\beta_{\mathrm{out}} ,\,
v^*_{\mathrm{in}} ,\,
w^*_{\mathrm{throat}} ,\,
s^*_{\mathrm{throat}}
]\]</div>
<p>where:</p>
<blockquote>
<div><ul class="simple">
<li><p><span class="math notranslate nohighlight">\(v\)</span> and <span class="math notranslate nohighlight">\(w\)</span> are the absolute and relative velocity.</p></li>
<li><p><span class="math notranslate nohighlight">\(\beta\)</span> is the relative flow angle.</p></li>
<li><p><span class="math notranslate nohighlight">\(s\)</span> is entropy.</p></li>
<li><p>Superscript <span class="math notranslate nohighlight">\(*\)</span> denotes chhoked state property.</p></li>
<li><p>Subscript dentoes the respective plane.</p></li>
</ul>
</div></blockquote>
<p>When this set if input is used to evaluate the model equations, the output may be inconsistent. The mass flow rates for different
planes and cascades may differ, the loss coefficient error may not be zero, the relative flow angles may be different from the
deviation models and the calculated exit pressure may not match the one specified by the boundary conditions. This raises
a set of residual equations that is required to be solved, in order for the model to be consistent. For example, for the <cite>evaluate_critical_cascade</cite>
this set of equations will look like this:</p>
<div class="math notranslate nohighlight">
\[R(x) = [
\Delta p_\mathrm{out} ,\,
\Delta \dot{m}_\mathrm{out} ,\,
\Delta Y_\mathrm{out} ,\,
\Delta \beta_\mathrm{out} ,\,
\Delta \mathcal{L}_\mathrm{throat}^* ,\,
\Delta \dot{m}_\mathrm{throat}^* ,\,
\Delta Y_\mathrm{throat}^*
] = 0,\]</div>
<p>where:</p>
<blockquote>
<div><ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\Delta p_\mathrm{out}\)</span> refer to the exit pressure error.</p></li>
<li><p><span class="math notranslate nohighlight">\(\Delta \dot{m}\)</span> refer to differences in mass flow rates.</p></li>
<li><p><span class="math notranslate nohighlight">\(\Delta Y\)</span> refer to loss coefficient errors.</p></li>
<li><p><span class="math notranslate nohighlight">\(\Delta \beta\)</span> refer to discrepancy between flow input flow angle and deviation model.</p></li>
<li><p><span class="math notranslate nohighlight">\(\Delta \mathcal{L}_\mathrm{throat}^*\)</span> refer to error in component of the gradient of the Lagrange function (see <a class="reference internal" href="choking_models.html#evaluate-cascade-critical"><span class="std std-ref">Calculate critical state model</span></a>).</p></li>
</ul>
</div></blockquote>
<p>In this way, the model present an equation-oriented problem formulation, where the equations can be solved using gradient-based solvers for both performance analysis and design optimization.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Lasse Borg Anderson and Roberto Agromayor.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>